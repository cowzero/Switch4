# Switch4
1. HW1_1
① 개요
P2.0, P2.1 두 개의 푸시버튼 스위치 입력을 받아 네 가지 입력 상황에 대해 8개의 LED가 아래와 같이 동작 되도록 한다. 단, 회전 시 1개의 LED가 켜진 상태로 왼쪽이나 오른쪽으로 이동하고 이동 주기는 적절하게 설정한다.


번호
P2
스위치(P2.1)
스위치(P2.0)
동작
①
#0FF
누르지 않음
누르지 않음
정지
②
#0FE
누르지 않음
누름
오른쪽 회전
③
#0FD
누름
누르지 않음
왼쪽 회전
④
#0FC
누름
누름
모두 꺼짐


② 소스 코드

	ORG 	0			;PC = 0H부터 시작
	MOV	P1, #11101111B	;1개의 LED만 켠다
	MOV	P2,#0FFH		;스위치를 초기화 한다

LP:	MOV 	A, P2			;스위치의 값을 확인해서
	CJNE	A, #0FFH, LP1	;①의 경우가 아니면 LP1로 간다
	ACALL	DELAY			;둘 다 누르지 않은 경우 - 정지
	SJMP	LP			;다시 돌아가 스위치의 값을 확인한다

LP1:	CJNE	A, #0FEH, LP2	;①,②의 경우가 아니면 LP2로 간다
	MOV	A, P1			;P2.0만 누른 경우
	RR	A			;A를 오른쪽으로 회전한 후
	MOV	P1, A			;P1에 출력한다
	ACALL	DELAY			;약간의 지연시간을 가진 후
	SJMP	LP			;다시 돌아가 스위치의 값을 확인한다

LP2:	CJNE	A, #0FDH, LP3	;①,②,③의 경우가 아니면 LP2로 간다
	MOV	A, P1			;P2.1만 누른 경우
	RL	A			;A를 왼쪽으로 회전한 후
	MOV	P1, A			;P1에 출력한다
	ACALL	DELAY			;약간의 지연시간을 가진 후
	SJMP	LP			;다시 돌아가 스위치의 값을 확인한다

LP3:	MOV	A, #0FFH		;둘다 누른 경우, LED를 끄기 위해 A에 저장한 후
	MOV	P1, A			;P1에 그 값을 출력한다
	ACALL	DELAY			;약간의 지연시간을 가진 후
	SJMP	LP			;다시 돌아가 스위치의 값을 확인한다
		
DELAY:MOV	R2, #100		;지연
AGAIN:MOV	R3, #11
HERE:	NOP
	NOP	
	DJNZ	R3, HERE
	DJNZ	R2, AGAIN
	RET

* 지연시간 
HERE LOOP : (4 * 11) * 1.085us = 47.74us 
AGAIN LOOP : 100 * 47.74us = 4774s  
ELSE : (3 * 100 * 1.085) = 325.5us 
총 지연시간 = 4774 + 325.5 = 5099.5us ≒ 5ms


② 동작 확인 및 분석
-프로그램 처음 시작할 때
5번째 LED만 켜진 채로 정지해 있다.

-P2.0만 눌렀을 때






일정 시간을 가지고 오른쪽으로 한 칸씩 이동하는 것을 볼 수 있었다.

-P2.1만 눌렀을 때




















일정 시간을 가지고 왼쪽으로 한 칸씩 이동하는 것을 볼 수 있었다.

-둘 다 누르지 않았을 때











LED가 움직이지 않고 정지해 있음을 볼 수 있었다.

-둘 다 눌렀을 때










LED의 불이 꺼졌음을 볼 수 있었다.
